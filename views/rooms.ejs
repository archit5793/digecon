<style>
#add-button{
  margin: 0px;
}
 .thumbnail{
   background-color:#dbf0f9;
 }
  body{
    background-color: #5bc0de;
    padding-top: 70px;
  }
</style>
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">DIGICON</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href=<%-"/profile?username="+req.session.username%>>Profile <span class="sr-only">(current)</span></a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/logout">Logout</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="row">
  <div class="col-md-6">
    <h2 style="float: left;">Showing all the Rooms added by <%=req.session.username.toUpperCase()%></h2>
  </div>
</div>
<div class="row">
  <div class="col-sm-6 col-md-4" id="room1" style="display: <%=rooms_data[0].visibility%>;">
    <div class="thumbnail">
      <img src="images/home.png" alt="<%=rooms_data[0].name%>">
      <div class="caption">
        <h3><%=rooms_data[0].name%></h3>
        <p>Created By: <%=rooms_data[0].createdBy%></p>
        <p><button class="btn btn-primary" data-toggle="modal" data-target="#myModal" onclick="Rooms.editroom('room1')">Edit</button>
          <a class="btn btn-default" href="/roomDetails?roomid=room1">View</a></p>
      </div>
    </div>
  </div>
  <div class="col-sm-6 col-md-4" id="room2" style="display: <%=rooms_data[1].visibility%>;">
    <div class="thumbnail">
      <img src="images/home.png" alt="<%=rooms_data[1].name%>">
      <div class="caption">
        <h3><%=rooms_data[1].name%></h3>
        <p>Created By: <%=rooms_data[1].createdBy%></p>
        <p><button class="btn btn-primary" data-toggle="modal" data-target="#myModal" onclick="Rooms.editroom('room2')">Edit</button>
          <a class="btn btn-default" href="/roomDetails?roomid=room2">View</a></p>
      </div>
    </div>
  </div>
  <div class="col-sm-6 col-md-4" id="room3" style="display: <%=rooms_data[2].visibility%>;">
    <div class="thumbnail">
      <img src="images/home.png" alt="<%=rooms_data[2].name%>">
      <div class="caption">
        <h3><%=rooms_data[2].name%></h3>
        <p>Created By: <%=rooms_data[2].createdBy%></p>
        <p><button class="btn btn-primary" data-toggle="modal" data-target="#myModal" onclick="Rooms.editroom('room3')">Edit</button>
          <a class="btn btn-default" href="/roomDetails?roomid=room3">View</a></p>
      </div>
    </div>
  </div>
  <div class="col-sm-6 col-md-4" id="room4" style="display: <%=rooms_data[3].visibility%>;">
    <div class="thumbnail">
      <img src="images/home.png" alt="<%=rooms_data[3].name%>">
      <div class="caption">
        <h3><%=rooms_data[3].name%></h3>
        <p>Created By: <%=rooms_data[3].createdBy%></p>
        <p><button class="btn btn-primary" data-toggle="modal" data-target="#myModal" onclick="Rooms.editroom('room4')">Edit</button>
          <a href="/roomDetails?roomid=room4" class="btn btn-default" >View</a></p>
      </div>
    </div>
  </div>
  <div class="col-xs-6 col-md-3" id="add-button" style="display:<%=addbutt%>;">
    <button class="thumbnail" onclick="Rooms.addroom()">
      <img src="images/addnew.png" alt="Add New Room">
    </button>
  </div>

</div>


<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Edit Room</h4>
      </div>

      <form method="post" action="/editRoom">
        <div class="modal-body">
          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" name="name" class="form-control" id="name" placeholder="Name">
          </div>
          <label for="name">Devices</label>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="led10"> LED 10W
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="led15"> LED 15W
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="light100"> Light 100W
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="light40"> Light 40W
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="fan"> Ceiling Fan
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="ac1"> Air Conditioner(1T)
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="ac15"> Air Conditioner(1.5T)
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="tvled30"> LED TV(30in)
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="tvled42"> LED TV(42in)
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" name="dev[]" value="tvlcd"> LCD TV
            </label>
          </div>
          <input type="hidden" name="roomid" value="" id="typetosend">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save Changes</button>
      </div>
      </form>

    </div>
  </div>
</div>
<script>
  var Rooms={
    addroom:function(){
      aja()
        .method('get')
        .url('/addRoom')
        .on('200', function(response){
          console.log(response);
          if(response.roomcount>0){
              document.getElementById(response.roomId).setAttribute('style','display:inline');
            }

          if(response.roomcount>=4){
            document.getElementById("add-button").setAttribute('style','display:none');
          }
        })
        .go();

    },
    editroom:function(roomid){
      document.getElementById('typetosend').setAttribute('value',roomid);
    },
    roomdetail:function(roomid){
      aja()
        .method('get')
        .url('/roomDetails')
        .data({roomId:roomid})
        .on('200', function(response){

        })
        .go();
    }
  };
</script>
